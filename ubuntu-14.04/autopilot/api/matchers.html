<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>autopilot.matchers - Custom matchers for test assertions &mdash; Autopilot 1.4+14.04.20140213-0 documentation</title>
    
    <link rel="stylesheet" href="../_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/otto.css" type="text/css" />
    <link rel="stylesheet" href="../_static/centertext.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.4+14.04.20140213-0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="top" title="Autopilot 1.4+14.04.20140213-0 documentation" href="../index.html" />
    <link rel="up" title="Autopilot API Documentation" href="index.html" />
    <link rel="next" title="autopilot.platform - Functions for platform detection" href="platform.html" />
    <link rel="prev" title="autopilot.introspection - Autopilot introspection internals" href="introspection.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="platform.html" title="autopilot.platform - Functions for platform detection"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="introspection.html" title="autopilot.introspection - Autopilot introspection internals"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">Autopilot 1.4+14.04.20140213-0 documentation</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">Autopilot API Documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="module-autopilot.matchers">
<span id="autopilot-matchers-custom-matchers-for-test-assertions"></span><h1><tt class="docutils literal"><span class="pre">autopilot.matchers</span></tt> - Custom matchers for test assertions<a class="headerlink" href="matchers.html#module-autopilot.matchers" title="Permalink to this headline">¶</a></h1>
<p>Autopilot-specific testtools matchers.</p>
<dl class="class">
<dt id="autopilot.matchers.Eventually">
<em class="property">class </em><tt class="descclassname">autopilot.matchers.</tt><tt class="descname">Eventually</tt><big>(</big><em>matcher</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="../_modules/autopilot/matchers.html#Eventually"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="matchers.html#autopilot.matchers.Eventually" title="Permalink to this definition">¶</a></dt>
<dd><p>Asserts that a value will eventually equal a given Matcher object.</p>
<p>This matcher wraps another testtools matcher object. It makes that other
matcher work with a timeout. This is necessary for several reasons:</p>
<ol class="arabic simple">
<li>Since most actions in a GUI applicaton take some time to complete, the
test may need to wait for the application to enter the expected state.</li>
<li>Since the test is running in a separate process to the application under
test, test authors cannot make any assumptions about when the
application under test will recieve CPU time to update to the expected
state.</li>
</ol>
<p>There are two main ways of using the Eventually matcher:</p>
<p><strong>Attributes from the application</strong>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="bp">self</span><span class="o">.</span><span class="n">assertThat</span><span class="p">(</span><span class="n">window</span><span class="o">.</span><span class="n">maximized</span><span class="p">,</span> <span class="n">Eventually</span><span class="p">(</span><span class="n">Equals</span><span class="p">(</span><span class="bp">True</span><span class="p">)))</span>
</pre></div>
</div>
<p>Here, <tt class="docutils literal"><span class="pre">window</span></tt> is an object generated by autopilot from the applications
state. This pattern of usage will cover 90% (or more) of the assertions in
an autopilot test. Note that any matcher can be used - either from
testtools or any custom matcher that implements the matcher API:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="bp">self</span><span class="o">.</span><span class="n">assertThat</span><span class="p">(</span><span class="n">window</span><span class="o">.</span><span class="n">height</span><span class="p">,</span> <span class="n">Eventually</span><span class="p">(</span><span class="n">GreaterThan</span><span class="p">(</span><span class="mi">200</span><span class="p">)))</span>
</pre></div>
</div>
<p><strong>Callable Objects</strong>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="bp">self</span><span class="o">.</span><span class="n">assertThat</span><span class="p">(</span>
    <span class="n">autopilot</span><span class="o">.</span><span class="n">platform</span><span class="o">.</span><span class="n">model</span><span class="p">,</span> <span class="n">Eventually</span><span class="p">(</span><span class="n">Equals</span><span class="p">(</span><span class="s">&quot;Galaxy Nexus&quot;</span><span class="p">)))</span>
</pre></div>
</div>
<p>In this example we&#8217;re using the <a class="reference internal" href="platform.html#autopilot.platform.model" title="autopilot.platform.model"><tt class="xref py py-func docutils literal"><span class="pre">autopilot.platform.model</span></tt></a> function
as a callable. In this form, Eventually matches against the return value
of the callable.</p>
<p>This can also be used to use a regular python property inside an Eventually
matcher:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="bp">self</span><span class="o">.</span><span class="n">assertThat</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">mouse</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">Eventually</span><span class="p">(</span><span class="n">LessThan</span><span class="p">(</span><span class="mi">10</span><span class="p">)))</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Using this form generally makes your tests less readable, and
should be used with great care. It also relies the test author to have
knowledge about the implementation of the object being matched against.
In this example, if <tt class="docutils literal"><span class="pre">self.mouse.x</span></tt> were ever to change to be a
regular python attribute, this test would likely break.</p>
</div>
<p><strong>Timeout</strong></p>
<p>By default timeout period is ten seconds. This can be altered by passing
the timeout keyword:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="bp">self</span><span class="o">.</span><span class="n">assertThat</span><span class="p">(</span><span class="n">foo</span><span class="o">.</span><span class="n">bar</span><span class="p">,</span> <span class="n">Eventually</span><span class="p">(</span><span class="n">Equals</span><span class="p">(</span><span class="mi">123</span><span class="p">),</span> <span class="n">timeout</span><span class="o">=</span><span class="mi">30</span><span class="p">))</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">The Eventually matcher does not work with any other matcher
that expects a callable argument (such as testtools&#8217; &#8216;Raises&#8217; matcher)</p>
</div>
</dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/otto-64.png" alt="Logo"/>
            </a></p>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="https://developer.ubuntu.com/api/devel/ubuntu-14.04/autopilot/search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
  <h4>Previous topic</h4>
  <p class="topless"><a href="introspection.html"
                        title="previous chapter"><tt class="docutils literal"><span class="pre">autopilot.introspection</span></tt> - Autopilot introspection internals</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="platform.html"
                        title="next chapter"><tt class="docutils literal"><span class="pre">autopilot.platform</span></tt> - Functions for platform detection</a></p>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="platform.html" title="autopilot.platform - Functions for platform detection"
             >next</a> |</li>
        <li class="right" >
          <a href="introspection.html" title="autopilot.introspection - Autopilot introspection internals"
             >previous</a> |</li>
        <li><a href="../index.html">Autopilot 1.4+14.04.20140213-0 documentation</a> &raquo;</li>
          <li><a href="index.html" >Autopilot API Documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
      <div class=center_text>
        <a href="../faq/contribute.html">Learn how you can contribute!</a> / <a href="https://bugs.launchpad.net/autopilot/+filebug">File a bug</a>
     <br/>
      </div>
        &copy; Copyright 2012-2013, Canonical.
    </div>


  </body>
</html>