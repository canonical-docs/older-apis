<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.4"/>
<title>GEIS: geis2.c</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="https://developer.ubuntu.com/api/devel/ubuntu-13.10/cplusplus/geis/jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo_x64.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">GEIS
   &#160;<span id="projectnumber">2.0</span>
   </div>
   <div id="projectbrief">Gesture Engine Interface Support</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.4 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('geis2_8c-example.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">geis2.c</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"></div>
<div class="line"><span class="preprocessor">#include &quot;geis_config.h&quot;</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#include &lt;errno.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="geis_8h.html" title="This is the public interface for the GEIS gesture API. ">geis/geis.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;string.h&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;sys/select.h&gt;</span></div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span> print_attr(GeisAttr attr)</div>
<div class="line">{</div>
<div class="line">  GeisString attr_name = <a name="a0"></a><a class="code" href="group__geis__v2__attrs.html#ga486ce2c086d0010c26bcebe605d57bca" title="An opaque type that encapsulates a GEIS attribute. ">geis_attr_name</a>(attr);</div>
<div class="line">  <span class="keywordflow">switch</span> (<a name="a1"></a><a class="code" href="group__geis__v2__attrs.html#ga2a9089c6e2371e4d2b3cc641ee605f3f" title="Gets the type of an attribute value. ">geis_attr_type</a>(attr))</div>
<div class="line">  {</div>
<div class="line">    <span class="keywordflow">case</span> <a name="a2"></a><a class="code" href="group__geis__common.html#ggaf2d4ebbaeea297a1a2cd0efa86835bc5a5b1013e13dab095de5a44fadf49c925d" title="Attr is truth-valued . ">GEIS_ATTR_TYPE_BOOLEAN</a>:</div>
<div class="line">      printf(<span class="stringliteral">&quot;  \&quot;%s\&quot;: %s\n&quot;</span>, attr_name,</div>
<div class="line">             <a name="a3"></a><a class="code" href="group__geis__v2__attrs.html#ga67576ec5246ada397ab11e67a700b3fa" title="Gets the value of an attribute as a GeisBoolean. ">geis_attr_value_to_boolean</a>(attr) ? <span class="stringliteral">&quot;true&quot;</span> : <span class="stringliteral">&quot;false&quot;</span>);</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> <a name="a4"></a><a class="code" href="group__geis__common.html#ggaf2d4ebbaeea297a1a2cd0efa86835bc5a85004bac844a8e60cffce17c7de34a71" title="Attr is real-valued. ">GEIS_ATTR_TYPE_FLOAT</a>:</div>
<div class="line">      printf(<span class="stringliteral">&quot;  \&quot;%s\&quot;: %g\n&quot;</span>, attr_name, <a name="a5"></a><a class="code" href="group__geis__v2__attrs.html#gae90ae27d3474b9a62f71d1b4617adf2b" title="Gets the value of an attribute as a GeisFloat. ">geis_attr_value_to_float</a>(attr));</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> <a name="a6"></a><a class="code" href="group__geis__common.html#ggaf2d4ebbaeea297a1a2cd0efa86835bc5af1fad925efcfa54a224f0b2a78acaa30" title="Attr is a counting number. ">GEIS_ATTR_TYPE_INTEGER</a>:</div>
<div class="line">      printf(<span class="stringliteral">&quot;  \&quot;%s\&quot;: %d\n&quot;</span>, attr_name, <a name="a7"></a><a class="code" href="group__geis__v2__attrs.html#gaed7db973b5ec7697ab5bd2cc980801e6" title="Gets the value of an attribute as a GeisInteger. ">geis_attr_value_to_integer</a>(attr));</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">case</span> <a name="a8"></a><a class="code" href="group__geis__common.html#ggaf2d4ebbaeea297a1a2cd0efa86835bc5ad045757f9b8c74a0ce8542b967a188f4" title="Attr is a null-terminated UTF-8 string. ">GEIS_ATTR_TYPE_STRING</a>:</div>
<div class="line">      printf(<span class="stringliteral">&quot;  \&quot;%s\&quot;: %s\n&quot;</span>, attr_name, <a name="a9"></a><a class="code" href="group__geis__v2__attrs.html#gaee17c13b8a56f8ed62927accd434fe3e" title="Gets the value of an attribute as a GeisString. ">geis_attr_value_to_string</a>(attr));</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    <span class="keywordflow">default</span>:</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">  }</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span></div>
<div class="line">dump_device_event(<a name="_a10"></a><a class="code" href="class_geis_event.html" title="A generic GEIS event. ">GeisEvent</a> event)</div>
<div class="line">{</div>
<div class="line">  <a name="_a11"></a><a class="code" href="class_geis_device.html" title="A gesture-capable input device. ">GeisDevice</a> device;</div>
<div class="line">  GeisAttr attr;</div>
<div class="line">  GeisSize i;</div>
<div class="line"></div>
<div class="line">  attr = <a name="a12"></a><a class="code" href="group__geis__v2__event__control.html#gabb751273c7c3297c692196bdd1b6fb45" title="Gets a named attribute from the event. ">geis_event_attr_by_name</a>(event, <a name="a13"></a><a class="code" href="group__geis__v2__device.html#ga15db5a218633ecbe74cbf8c529b4ee6f" title="The event attribute containing a pointer to a GeisDevice. ">GEIS_EVENT_ATTRIBUTE_DEVICE</a>);</div>
<div class="line">  device = <a name="a14"></a><a class="code" href="group__geis__v2__attrs.html#gac023776d0497ca3fe7ce1b42d6f663ac" title="Gets the value of an attribute as a GeisPointer. ">geis_attr_value_to_pointer</a>(attr);</div>
<div class="line">  printf(<span class="stringliteral">&quot;device %02d \&quot;%s\&quot;\n&quot;</span>,</div>
<div class="line">         <a name="a15"></a><a class="code" href="group__geis__v2__device.html#ga50dc0197231d68f2b8933c6b25ccde17" title="Gets the system identifier of the iput device. ">geis_device_id</a>(device), <a name="a16"></a><a class="code" href="group__geis__v2__device.html#gaf8af5a75015b66cce547d0b39dec94c7" title="Gets the name of the input device. ">geis_device_name</a>(device));</div>
<div class="line">  <span class="keywordflow">for</span> (i = 0; i &lt; <a name="a17"></a><a class="code" href="group__geis__v2__device.html#ga5aa6e28512e5bfaf977cb9e49b33c336" title="Gets the number of attributes of the device. ">geis_device_attr_count</a>(device); ++i)</div>
<div class="line">  {</div>
<div class="line">    print_attr(<a name="a18"></a><a class="code" href="group__geis__v2__device.html#ga09aff11d9194ca467d7c84487288f975" title="Gets the indicated attribute of the device. ">geis_device_attr</a>(device, i));</div>
<div class="line">  }</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span></div>
<div class="line">dump_gesture_event(<a class="code" href="class_geis_event.html" title="A generic GEIS event. ">GeisEvent</a> event)</div>
<div class="line">{</div>
<div class="line">  GeisSize i;</div>
<div class="line">  <a name="_a19"></a><a class="code" href="class_geis_touch_set.html" title="A collection of GeisTouch. ">GeisTouchSet</a> touchset;</div>
<div class="line">  <a name="_a20"></a><a class="code" href="class_geis_group_set.html" title="A collection of GeisGroups. ">GeisGroupSet</a> groupset;</div>
<div class="line">  GeisAttr     attr;</div>
<div class="line"></div>
<div class="line">  attr = <a class="code" href="group__geis__v2__event__control.html#gabb751273c7c3297c692196bdd1b6fb45" title="Gets a named attribute from the event. ">geis_event_attr_by_name</a>(event, <a name="a21"></a><a class="code" href="group__geis__v2__gesture.html#gaef071a7750234cedba8463d200a1465f" title="The event attribute containing a pointer to a GeisTouchSet. ">GEIS_EVENT_ATTRIBUTE_TOUCHSET</a>);</div>
<div class="line">  touchset = <a class="code" href="group__geis__v2__attrs.html#gac023776d0497ca3fe7ce1b42d6f663ac" title="Gets the value of an attribute as a GeisPointer. ">geis_attr_value_to_pointer</a>(attr);</div>
<div class="line"></div>
<div class="line">  attr = <a class="code" href="group__geis__v2__event__control.html#gabb751273c7c3297c692196bdd1b6fb45" title="Gets a named attribute from the event. ">geis_event_attr_by_name</a>(event, <a name="a22"></a><a class="code" href="group__geis__v2__gesture.html#ga500ad87d7e654f2945ea9672f4ee31f5" title="The event attribute containing a pointer to a GeisGroupSet. ">GEIS_EVENT_ATTRIBUTE_GROUPSET</a>);</div>
<div class="line">  groupset = <a class="code" href="group__geis__v2__attrs.html#gac023776d0497ca3fe7ce1b42d6f663ac" title="Gets the value of an attribute as a GeisPointer. ">geis_attr_value_to_pointer</a>(attr);</div>
<div class="line"></div>
<div class="line">  printf(<span class="stringliteral">&quot;gesture\n&quot;</span>);</div>
<div class="line">  <span class="keywordflow">for</span> (i= 0; i &lt; <a name="a23"></a><a class="code" href="group__geis__v2__gesture.html#gab308576912d2aa8920c9064089c8bb46" title="Gets the number of gesture groups in a groupset. ">geis_groupset_group_count</a>(groupset); ++i)</div>
<div class="line">  {</div>
<div class="line">    GeisSize j;</div>
<div class="line">    <a name="_a24"></a><a class="code" href="class_geis_group.html" title="A collection of gesture frames. ">GeisGroup</a> group = <a name="a25"></a><a class="code" href="group__geis__v2__gesture.html#ga07c6d31e6dfde83a845d72b9f6eab2e6" title="Gets an indicated gesture group from a groupset. ">geis_groupset_group</a>(groupset, i);</div>
<div class="line">    printf(<span class="stringliteral">&quot;+group %u\n&quot;</span>, <a name="a26"></a><a class="code" href="group__geis__v2__gesture.html#ga1e1f00fd070bfdbdab78376cd255c931" title="Gets the identifier of a gesture group. ">geis_group_id</a>(group));</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">for</span> (j=0; j &lt; <a name="a27"></a><a class="code" href="group__geis__v2__gesture.html#ga85097654b075e1d9ca28503eab3288a2" title="Gets the number of gesture frames in a gesture group. ">geis_group_frame_count</a>(group); ++j)</div>
<div class="line">    {</div>
<div class="line">      GeisSize k;</div>
<div class="line">      <a name="_a28"></a><a class="code" href="class_geis_frame.html" title="A collection of information describing the state of a gesture. ">GeisFrame</a> frame = <a name="a29"></a><a class="code" href="group__geis__v2__gesture.html#ga3709a8bd7efff1cf8b7b4c31f4485cdb" title="Gets an indicated gesture frame from a gesture group. ">geis_group_frame</a>(group, j);</div>
<div class="line">      GeisSize attr_count = <a name="a30"></a><a class="code" href="group__geis__v2__gesture.html#ga41670bea606da5a02fdfe66105b4996f" title="Gets the number of attrs associated with a gesture frame. ">geis_frame_attr_count</a>(frame);</div>
<div class="line"></div>
<div class="line">      printf(<span class="stringliteral">&quot;+frame %u\n&quot;</span>, <a name="a31"></a><a class="code" href="group__geis__v2__gesture.html#ga8b20f14deaac0df0663977b2640bb18a" title="Gets the identifier of a gesture frame. ">geis_frame_id</a>(frame));</div>
<div class="line">      <span class="keywordflow">for</span> (k = 0; k &lt; attr_count; ++k)</div>
<div class="line">      {</div>
<div class="line">        print_attr(<a name="a32"></a><a class="code" href="group__geis__v2__gesture.html#ga9901aec758cd97f9ed0e41cba7d52d49" title="Gets an indicated attr from a gesture frame. ">geis_frame_attr</a>(frame, k));</div>
<div class="line">      }</div>
<div class="line"></div>
<div class="line">      <span class="keywordflow">for</span> (k = 0; k &lt; <a name="a33"></a><a class="code" href="group__geis__v2__gesture.html#ga01d9a3a398647a9d15081fac36e502c5" title="Gets the number of touches making up a gesture for the frame. ">geis_frame_touchid_count</a>(frame); ++k)</div>
<div class="line">      {</div>
<div class="line">        GeisSize  touchid = <a name="a34"></a><a class="code" href="group__geis__v2__gesture.html#ga6a8caa03c57147629f2dc0f7b8a0877e" title="Gets the ID of the indicated touch within the gesture frame. ">geis_frame_touchid</a>(frame, k);</div>
<div class="line">        <a name="_a35"></a><a class="code" href="class_geis_touch.html" title="An instance of a touch. ">GeisTouch</a> touch = <a name="a36"></a><a class="code" href="group__geis__v2__gesture.html#ga42fac1e6b0afb36ebd3dece5c4702646" title="Gets an identified touch from a touchset. ">geis_touchset_touch_by_id</a>(touchset, touchid);</div>
<div class="line">        GeisSize  n;</div>
<div class="line">        printf(<span class="stringliteral">&quot;+touch %u\n&quot;</span>, (<span class="keywordtype">unsigned</span>)k);</div>
<div class="line">        <span class="keywordflow">for</span> (n = 0; n &lt; <a name="a37"></a><a class="code" href="group__geis__v2__gesture.html#gaa15acc9117506fc7e30cb3c3b12e0cb7" title="Gets the number of attrs associated with a touch. ">geis_touch_attr_count</a>(touch); ++n)</div>
<div class="line">        {</div>
<div class="line">          print_attr(<a name="a38"></a><a class="code" href="group__geis__v2__gesture.html#gaa1ddd52766710c1912edd434c0648bd8" title="Gets an indicated attr from a touch. ">geis_touch_attr</a>(touch, n));</div>
<div class="line">        }</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="keywordtype">void</span></div>
<div class="line">target_subscription(<a name="_a39"></a><a class="code" href="class_geis.html" title="Represents an instance of the gesture recognition engine. ">Geis</a> geis, <a name="_a40"></a><a class="code" href="class_geis_subscription.html" title="A gesture recognition subscription. ">GeisSubscription</a> subscription)</div>
<div class="line">{</div>
<div class="line">  <a class="code" href="group__geis__common.html#ga7fe40cb68bb7a98f5429284514872790" title="Errors returned from calls. ">GeisStatus</a> status;</div>
<div class="line">  <a name="_a41"></a><a class="code" href="class_geis_filter.html" title="Selects a subset of possible gestures in a subscription. ">GeisFilter</a> filter = <a name="a42"></a><a class="code" href="group__geis__v2__filter.html#ga52d7bfa7915e2cedd4076a30daad6071" title="Creates a new, empty filter. ">geis_filter_new</a>(geis, <span class="stringliteral">&quot;filter&quot;</span>);</div>
<div class="line">  <a name="a43"></a><a class="code" href="group__geis__v2__filter.html#gae3d533aca3aed29df70116a90300373e" title="Adds a term to a filter. ">geis_filter_add_term</a>(filter,</div>
<div class="line">                       <a name="a44"></a><a class="code" href="group__geis__v2__filter.html#gga34f77c178889dfb4c0e0a67bab448a88a3092a0e76147413bc884853485f421bf" title="Filters on gesture class and gesture attributes. ">GEIS_FILTER_CLASS</a>,</div>
<div class="line">                       GEIS_GESTURE_ATTRIBUTE_TOUCHES, <a name="a45"></a><a class="code" href="group__geis__v2__filter.html#gga7f26674f8204c7f92e76a4b56cbf5819aa014b8c6c240fe69d981186af44ac92a" title="Compares for equality. ">GEIS_FILTER_OP_EQ</a>, 2,</div>
<div class="line">                       NULL);</div>
<div class="line"></div>
<div class="line">  status = <a name="a46"></a><a class="code" href="group__geis__v2__subscription.html#ga2dbffb51db39ea96ae4b789920dd5a4c" title="Adds a filter to a subscription. ">geis_subscription_add_filter</a>(subscription, filter);</div>
<div class="line">  <span class="keywordflow">if</span> (status != <a name="a47"></a><a class="code" href="group__geis__common.html#gga7fe40cb68bb7a98f5429284514872790a4b15ef395a0628e8c820e286e7956081" title="normal successful completion ">GEIS_STATUS_SUCCESS</a>)</div>
<div class="line">  {</div>
<div class="line">    fprintf(stderr, <span class="stringliteral">&quot;error adding filter\n&quot;</span>);</div>
<div class="line">  }</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span></div>
<div class="line">main(<span class="keywordtype">int</span> argc GEIS_UNUSED, <span class="keywordtype">char</span>* argv[] GEIS_UNUSED)</div>
<div class="line">{</div>
<div class="line">  <a class="code" href="group__geis__common.html#ga7fe40cb68bb7a98f5429284514872790" title="Errors returned from calls. ">GeisStatus</a> status;</div>
<div class="line">  <a class="code" href="class_geis.html" title="Represents an instance of the gesture recognition engine. ">Geis</a> geis;</div>
<div class="line">  <a class="code" href="class_geis_subscription.html" title="A gesture recognition subscription. ">GeisSubscription</a> subscription;</div>
<div class="line">  <span class="keywordtype">int</span>        fd;</div>
<div class="line"></div>
<div class="line">  geis = <a name="a48"></a><a class="code" href="group__geis__v2__geis.html#gafa6d38f736262c4c39a0265a660ae174" title="Initializes an instance of the GEIS v2.0 API. ">geis_new</a>(<a name="a49"></a><a class="code" href="group__geis__v2__geis.html#ga219d08ef09bb7bd978c4c7861df55d47" title="Tells GEIS to send input device events. ">GEIS_INIT_TRACK_DEVICES</a>,</div>
<div class="line">                  <a name="a50"></a><a class="code" href="group__geis__v2__geis.html#ga2374f19838707466bcfd4461c7e56e76" title="Tells GEIS to send gesture class events. ">GEIS_INIT_TRACK_GESTURE_CLASSES</a>,</div>
<div class="line">                  NULL);</div>
<div class="line">  <a name="a51"></a><a class="code" href="group__geis__v2__config.html#ga68954ae949e85ebc2c496ff7509f88f8" title="Gets a feature configuration value. ">geis_get_configuration</a>(geis, <a name="a52"></a><a class="code" href="group__geis__v2__config.html#ga73b1bfd0e2f3885f21dfad2567736f28" title="Gets a Unix file descriptor that will signal the availablility of GEIS events for processing...">GEIS_CONFIGURATION_FD</a>, &amp;fd);</div>
<div class="line"></div>
<div class="line">  subscription = <a name="a53"></a><a class="code" href="group__geis__v2__subscription.html#ga35a50b739ff2807107dc8a43296ca020" title="Creates a new subscription. ">geis_subscription_new</a>(geis, <span class="stringliteral">&quot;example&quot;</span>, <a name="a54"></a><a class="code" href="group__geis__v2__subscription.html#gga06fc87d81c62e9abb8790b6e5713c55ba4c153fec6eee04183371ac4022dab5dd" title="The gesture engine will return gesture continuations, in which the class of a recognized gestire may ...">GEIS_SUBSCRIPTION_CONT</a>);</div>
<div class="line"></div>
<div class="line">  <span class="keywordflow">while</span>(1)</div>
<div class="line">  {</div>
<div class="line">    fd_set read_fds;</div>
<div class="line">    FD_ZERO(&amp;read_fds);</div>
<div class="line">    FD_SET(0, &amp;read_fds);</div>
<div class="line">    FD_SET(fd, &amp;read_fds);</div>
<div class="line">    <span class="keywordtype">int</span> sstat = select(fd+1, &amp;read_fds, NULL, NULL, NULL);</div>
<div class="line">    <span class="keywordflow">if</span> (sstat &lt; 0)</div>
<div class="line">    {</div>
<div class="line">      fprintf(stderr, <span class="stringliteral">&quot;error %d in select(): %s\n&quot;</span>, errno, strerror(errno));</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (FD_ISSET(fd, &amp;read_fds))</div>
<div class="line">    {</div>
<div class="line">      <a class="code" href="class_geis_event.html" title="A generic GEIS event. ">GeisEvent</a> event;</div>
<div class="line">      status = <a name="a55"></a><a class="code" href="group__geis__v2__event__control.html#ga599f3dbfbb9276ee05e199c7828791d9" title="Pumps the GEIS event loop. ">geis_dispatch_events</a>(geis);</div>
<div class="line">      status = <a name="a56"></a><a class="code" href="group__geis__v2__event__control.html#ga608d4dec827545b6dc38a18a2c33b338" title="Retrieves the next queued GEIS event. ">geis_next_event</a>(geis, &amp;event);</div>
<div class="line">      <span class="keywordflow">while</span> (status == <a name="a57"></a><a class="code" href="group__geis__common.html#gga7fe40cb68bb7a98f5429284514872790a773eaea5f9943ee52f30f0133bdc09ca" title="normal successful completion with data still remaining ">GEIS_STATUS_CONTINUE</a> || status == <a class="code" href="group__geis__common.html#gga7fe40cb68bb7a98f5429284514872790a4b15ef395a0628e8c820e286e7956081" title="normal successful completion ">GEIS_STATUS_SUCCESS</a>)</div>
<div class="line">      {</div>
<div class="line">        <span class="keywordflow">switch</span> (<a name="a58"></a><a class="code" href="group__geis__v2__event__control.html#gae54883e4bfedc254cd02ea2c7efaf21d" title="Gets the type of the event. ">geis_event_type</a>(event))</div>
<div class="line">        {</div>
<div class="line">          <span class="keywordflow">case</span> GEIS_EVENT_INIT_COMPLETE:</div>
<div class="line">            target_subscription(geis, subscription);</div>
<div class="line">            status = <a name="a59"></a><a class="code" href="group__geis__v2__subscription.html#gaf9ab0c59c1848d502fa0041cbe90d8b3" title="Activates a subscription. ">geis_subscription_activate</a>(subscription);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line">          <span class="keywordflow">case</span> GEIS_EVENT_DEVICE_AVAILABLE:</div>
<div class="line">          <span class="keywordflow">case</span> GEIS_EVENT_DEVICE_UNAVAILABLE:</div>
<div class="line">            dump_device_event(event);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line">          <span class="keywordflow">case</span> GEIS_EVENT_GESTURE_BEGIN:</div>
<div class="line">          <span class="keywordflow">case</span> GEIS_EVENT_GESTURE_UPDATE:</div>
<div class="line">          <span class="keywordflow">case</span> GEIS_EVENT_GESTURE_END:</div>
<div class="line">            dump_gesture_event(event);</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line"></div>
<div class="line">          <span class="keywordflow">default</span>:</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        }</div>
<div class="line">        <a name="a60"></a><a class="code" href="group__geis__v2__event__control.html#ga6a145ff415ea4ab94636286fffd36398" title="Destroys a GeisEvent. ">geis_event_delete</a>(event);</div>
<div class="line">        status = <a class="code" href="group__geis__v2__event__control.html#ga608d4dec827545b6dc38a18a2c33b338" title="Retrieves the next queued GEIS event. ">geis_next_event</a>(geis, &amp;event);</div>
<div class="line">      }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span> (FD_ISSET(0, &amp;read_fds))</div>
<div class="line">    {</div>
<div class="line">      <span class="keywordflow">break</span>;</div>
<div class="line">    }</div>
<div class="line">  }</div>
<div class="line"></div>
<div class="line">  <a name="a61"></a><a class="code" href="group__geis__v2__subscription.html#ga4ceccde5ea4fd59171bd0d33b7d50d53" title="Destroys a GEIS v2.0 subscription object. ">geis_subscription_delete</a>(subscription);</div>
<div class="line">  <a name="a62"></a><a class="code" href="group__geis__v2__geis.html#gac8d351201dd533e41d235d5921971a9f" title="Cleans up an instance of the GEIS v2.0 API. ">geis_delete</a>(geis);</div>
<div class="line">}</div>
<div class="line"></div>
</div><!-- fragment --> </div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Thu Sep 19 2013 22:21:50 for GEIS by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.4 </li>
  </ul>
</div>
</body>
</html>
