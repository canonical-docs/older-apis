<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>DeeTransaction</title>
<meta name="generator" content="DocBook XSL Stylesheets V1.76.1">
<link rel="home" href="index.html" title="Dee Reference Manual">
<link rel="up" href="ch02.html" title="Models">
<link rel="prev" href="DeeSharedModel.html" title="DeeSharedModel">
<link rel="next" href="ch03.html" title="Indexes">
<meta name="generator" content="GTK-Doc V1.18 (XML mode)">
<link rel="stylesheet" href="style.css" type="text/css">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table class="navigation" id="top" width="100%" summary="Navigation header" cellpadding="2" cellspacing="2">
<tr valign="middle">
<td><a accesskey="p" href="DeeSharedModel.html"><img src="left.png" width="24" height="24" border="0" alt="Prev"></a></td>
<td><a accesskey="u" href="ch02.html"><img src="up.png" width="24" height="24" border="0" alt="Up"></a></td>
<td><a accesskey="h" href="index.html"><img src="home.png" width="24" height="24" border="0" alt="Home"></a></td>
<th width="100%" align="center">Dee Reference Manual</th>
<td><a accesskey="n" href="ch03.html"><img src="right.png" width="24" height="24" border="0" alt="Next"></a></td>
</tr>
<tr><td colspan="5" class="shortcuts">
<a href="DeeTransaction.html#DeeTransaction.synopsis" class="shortcut">Top</a>
                   | 
                  <a href="DeeTransaction.html#DeeTransaction.description" class="shortcut">Description</a>
                   | 
                  <a href="DeeTransaction.html#DeeTransaction.object-hierarchy" class="shortcut">Object Hierarchy</a>
                   | 
                  <a href="DeeTransaction.html#DeeTransaction.implemented-interfaces" class="shortcut">Implemented Interfaces</a>
                   | 
                  <a href="DeeTransaction.html#DeeTransaction.properties" class="shortcut">Properties</a>
</td></tr>
</table>
<div class="refentry">
<a name="DeeTransaction"></a><div class="titlepage"></div>
<div class="refnamediv"><table width="100%"><tr>
<td valign="top">
<h2><span class="refentrytitle"><a name="DeeTransaction.top_of_page"></a>DeeTransaction</span></h2>
<p>DeeTransaction — A self contained change set for a <span class="type">DeeModel</span></p>
</td>
<td valign="top" align="right"></td>
</tr></table></div>
<div class="refsynopsisdiv">
<a name="DeeTransaction.synopsis"></a><h2>Synopsis</h2>
<pre class="synopsis">
#include &lt;dee.h&gt;

#define             <a class="link" href="DeeTransaction.html#DEE-TRANSACTION-ERROR:CAPS" title="DEE_TRANSACTION_ERROR">DEE_TRANSACTION_ERROR</a>
struct              <a class="link" href="DeeTransaction.html#DeeTransaction-struct" title="struct DeeTransaction">DeeTransaction</a>;
struct              <a class="link" href="DeeTransaction.html#DeeTransactionClass" title="struct DeeTransactionClass">DeeTransactionClass</a>;
enum                <a class="link" href="DeeTransaction.html#DeeTransactionError" title="enum DeeTransactionError">DeeTransactionError</a>;
<span class="returnvalue">gboolean</span>            <a class="link" href="DeeTransaction.html#dee-transaction-commit" title="dee_transaction_commit ()">dee_transaction_commit</a>              (<em class="parameter"><code><a class="link" href="DeeTransaction.html" title="DeeTransaction"><span class="type">DeeTransaction</span></a> *self</code></em>,
                                                         <em class="parameter"><code><span class="type">GError</span> **error</code></em>);
<span class="returnvalue">GQuark</span>              <a class="link" href="DeeTransaction.html#dee-transaction-error-quark" title="dee_transaction_error_quark ()">dee_transaction_error_quark</a>         (<em class="parameter"><code><span class="type">void</span></code></em>);
<span class="returnvalue">DeeModel</span> *          <a class="link" href="DeeTransaction.html#dee-transaction-get-target" title="dee_transaction_get_target ()">dee_transaction_get_target</a>          (<em class="parameter"><code><a class="link" href="DeeTransaction.html" title="DeeTransaction"><span class="type">DeeTransaction</span></a> *self</code></em>);
<span class="returnvalue">gboolean</span>            <a class="link" href="DeeTransaction.html#dee-transaction-is-committed" title="dee_transaction_is_committed ()">dee_transaction_is_committed</a>        (<em class="parameter"><code><a class="link" href="DeeTransaction.html" title="DeeTransaction"><span class="type">DeeTransaction</span></a> *self</code></em>);
<span class="returnvalue">DeeModel</span> *          <a class="link" href="DeeTransaction.html#dee-transaction-new" title="dee_transaction_new ()">dee_transaction_new</a>                 (<em class="parameter"><code><span class="type">DeeModel</span> *target</code></em>);
</pre>
</div>
<div class="refsect1">
<a name="DeeTransaction.object-hierarchy"></a><h2>Object Hierarchy</h2>
<pre class="synopsis">
  GObject
   +----<a class="link" href="DeeSerializableModel.html" title="DeeSerializableModel">DeeSerializableModel</a>
         +----DeeTransaction
</pre>
</div>
<div class="refsect1">
<a name="DeeTransaction.implemented-interfaces"></a><h2>Implemented Interfaces</h2>
<p>
DeeTransaction implements
 DeeModel and  DeeSerializable.</p>
</div>
<div class="refsect1">
<a name="DeeTransaction.properties"></a><h2>Properties</h2>
<pre class="synopsis">
  "<a class="link" href="DeeTransaction.html#DeeTransaction--target" title='The "target" property'>target</a>"                   <span class="type">DeeModel</span>*             : Read / Write / Construct Only
</pre>
</div>
<div class="refsect1">
<a name="DeeTransaction.description"></a><h2>Description</h2>
<p>
<a class="link" href="DeeTransaction.html" title="DeeTransaction"><span class="type">DeeTransaction</span></a> is a self contained change set related to some particular
<span class="type">DeeModel</span> called the <span class="emphasis"><em>target model</em></span>.
</p>
<p>
The transaction instance itself implements the <span class="type">DeeModel</span> interface in a way
that overlays the target model. In database terms the target model has
isolation level READ_COMMITTED. Meaning that the target model is not modified
until you call <a class="link" href="DeeTransaction.html#dee-transaction-commit" title="dee_transaction_commit ()"><code class="function">dee_transaction_commit()</code></a>.
</p>
<p>
To flush the changes to the target model call <a class="link" href="DeeTransaction.html#dee-transaction-commit" title="dee_transaction_commit ()"><code class="function">dee_transaction_commit()</code></a>.
After committing the transaction will become invalid and must be freed with
<code class="function">g_object_unref()</code>. It is a programming error to try and access a transaction
that has been committed with the sole exception of calling
<a class="link" href="DeeTransaction.html#dee-transaction-is-committed" title="dee_transaction_is_committed ()"><code class="function">dee_transaction_is_committed()</code></a>.
</p>
</div>
<div class="refsect1">
<a name="DeeTransaction.details"></a><h2>Details</h2>
<div class="refsect2">
<a name="DEE-TRANSACTION-ERROR:CAPS"></a><h3>DEE_TRANSACTION_ERROR</h3>
<pre class="programlisting">#define DEE_TRANSACTION_ERROR dee_transaction_error_quark()
</pre>
<p>
Error domain for the <a class="link" href="DeeTransaction.html" title="DeeTransaction"><span class="type">DeeTransaction</span></a>. Error codes will be from the
<a class="link" href="DeeTransaction.html#DeeTransactionError" title="enum DeeTransactionError"><span class="type">DeeTransactionError</span></a> enumeration
</p>
</div>
<hr>
<div class="refsect2">
<a name="DeeTransaction-struct"></a><h3>struct DeeTransaction</h3>
<pre class="programlisting">struct DeeTransaction;</pre>
<p>
All fields in the DeeTransaction structure are private and should never be
accessed directly
</p>
</div>
<hr>
<div class="refsect2">
<a name="DeeTransactionClass"></a><h3>struct DeeTransactionClass</h3>
<pre class="programlisting">struct DeeTransactionClass {
};
</pre>
<p>
</p>
</div>
<hr>
<div class="refsect2">
<a name="DeeTransactionError"></a><h3>enum DeeTransactionError</h3>
<pre class="programlisting">typedef enum {
  DEE_TRANSACTION_ERROR_CONCURRENT_MODIFICATION = 1,
  DEE_TRANSACTION_ERROR_COMMITTED = 2,
} DeeTransactionError;
</pre>
<p>
Error codes for the <a class="link" href="DeeTransaction.html" title="DeeTransaction"><span class="type">DeeTransaction</span></a> class. These codes will be set when the
error domain is <a class="link" href="DeeTransaction.html#DEE-TRANSACTION-ERROR:CAPS" title="DEE_TRANSACTION_ERROR"><span class="type">DEE_TRANSACTION_ERROR</span></a>.
</p>
<p>
<em class="parameter"><code>DEE_TRANSACTION_ERROR_CONCURRENT_MODIFICATION</code></em>: The target model has been
  modified while the transaction was open.
</p>
<p>
<em class="parameter"><code>DEE_TRANSACTION_ERROR_COMMITTED</code></em>: Raised when someone tries to commit a
  transaction that has already been committed
</p>
</div>
<hr>
<div class="refsect2">
<a name="dee-transaction-commit"></a><h3>dee_transaction_commit ()</h3>
<pre class="programlisting"><span class="returnvalue">gboolean</span>            dee_transaction_commit              (<em class="parameter"><code><a class="link" href="DeeTransaction.html" title="DeeTransaction"><span class="type">DeeTransaction</span></a> *self</code></em>,
                                                         <em class="parameter"><code><span class="type">GError</span> **error</code></em>);</pre>
<p>
Apply a transaction to its target model. After this call the transaction
is invalidated and must be freed with <code class="function">g_object_unref()</code>.
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>self</code></em> :</span></p></td>
<td>The transaction to commit</td>
</tr>
<tr>
<td><p><span class="term"><em class="parameter"><code>error</code></em> :</span></p></td>
<td>Location to return a <span class="type">GError</span> in or <code class="literal">NULL</code> to disregard
errors. <span class="annotation">[<acronym title="NULL is ok, both for passing and for returning."><span class="acronym">allow-none</span></acronym>]</span>
</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td>
<code class="literal">TRUE</code> if and only if the transaction successfully applies to :target.</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="dee-transaction-error-quark"></a><h3>dee_transaction_error_quark ()</h3>
<pre class="programlisting"><span class="returnvalue">GQuark</span>              dee_transaction_error_quark         (<em class="parameter"><code><span class="type">void</span></code></em>);</pre>
<p>
</p>
</div>
<hr>
<div class="refsect2">
<a name="dee-transaction-get-target"></a><h3>dee_transaction_get_target ()</h3>
<pre class="programlisting"><span class="returnvalue">DeeModel</span> *          dee_transaction_get_target          (<em class="parameter"><code><a class="link" href="DeeTransaction.html" title="DeeTransaction"><span class="type">DeeTransaction</span></a> *self</code></em>);</pre>
<p>
Get the target model of a transaction. This is just a convenience method
for accessing the :target property.
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>self</code></em> :</span></p></td>
<td>The transaction to retrieve the target model for</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td>The target model. <span class="annotation">[<acronym title="Don't free data after the code is done."><span class="acronym">transfer none</span></acronym>]</span>
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="dee-transaction-is-committed"></a><h3>dee_transaction_is_committed ()</h3>
<pre class="programlisting"><span class="returnvalue">gboolean</span>            dee_transaction_is_committed        (<em class="parameter"><code><a class="link" href="DeeTransaction.html" title="DeeTransaction"><span class="type">DeeTransaction</span></a> *self</code></em>);</pre>
<p>
Check if a <a class="link" href="DeeTransaction.html" title="DeeTransaction"><span class="type">DeeTransaction</span></a> has been committed. This method is mainly for
debugging and testing purposes.
</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>self</code></em> :</span></p></td>
<td>The transaction to inspect</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td>
<code class="literal">TRUE</code> if and only if <a class="link" href="DeeTransaction.html#dee-transaction-commit" title="dee_transaction_commit ()"><code class="function">dee_transaction_commit()</code></a> has completed
successfully on the transaction.</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2">
<a name="dee-transaction-new"></a><h3>dee_transaction_new ()</h3>
<pre class="programlisting"><span class="returnvalue">DeeModel</span> *          dee_transaction_new                 (<em class="parameter"><code><span class="type">DeeModel</span> *target</code></em>);</pre>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><p><span class="term"><em class="parameter"><code>target</code></em> :</span></p></td>
<td>The <span class="type">DeeModel</span> the transaction applies against</td>
</tr>
<tr>
<td><p><span class="term"><span class="emphasis"><em>Returns</em></span> :</span></p></td>
<td>A newly allocated <a class="link" href="DeeTransaction.html" title="DeeTransaction"><span class="type">DeeTransaction</span></a>. Free with <code class="function">g_object_unref()</code> when
done using it - no matter if you call <a class="link" href="DeeTransaction.html#dee-transaction-commit" title="dee_transaction_commit ()"><code class="function">dee_transaction_commit()</code></a> or not. <span class="annotation">[<acronym title="Free data after the code is done."><span class="acronym">transfer full</span></acronym>][<acronym title="Override the parsed C type with given type"><span class="acronym">type</span></acronym> Dee.Transaction]</span>
</td>
</tr>
</tbody>
</table></div>
</div>
</div>
<div class="refsect1">
<a name="DeeTransaction.property-details"></a><h2>Property Details</h2>
<div class="refsect2">
<a name="DeeTransaction--target"></a><h3>The <code class="literal">"target"</code> property</h3>
<pre class="programlisting">  "target"                   <span class="type">DeeModel</span>*             : Read / Write / Construct Only</pre>
<p>Target model.</p>
</div>
</div>
</div>
<div class="footer">
<hr>
          Generated by GTK-Doc V1.18</div>
</body>
</html>